@page

@{
    var stats = LemmyWeb.Controllers.Webhook.LemmNannyCurrentStats;
     ViewData["Title"] = "Stats";
}

<h1>Stats</h1>
<div class="container">
    <div class="row mt-4">
        Below are some stats LemmyNanny is configured with that's feeding the data to this web instance. This page doesn't refresh automatically, so if you want to see if LemmyNanny is still running, then refresh to see the "Last Seen" timestamp is updating.
    </div>
</div>
@if (stats.IsSet)
{
    <div class="container mt-4 p-2" style="background-color:white;">
    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Prompt:</strong></label>
        <div class="col-sm-10">
            @stats.Prompt
        </div>
    </div>

    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Reading Mode:</strong></label>
        <div class="col-sm-10">
            @stats.ReadingMode
        </div>
    </div>

    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Sort Type:</strong></label>
        <div class="col-sm-10">
            @stats.SortType
        </div>
    </div>

    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Listing Type:</strong></label>
        <div class="col-sm-10">
            @stats.ListingType
        </div>
    </div>

    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Lemmy Host:</strong></label>
        <div class="col-sm-10">
            <a href="@stats.LemmyHost">@stats.LemmyHost</a>
        </div>
    </div>



    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Comments Seen:</strong></label>
        <div class="col-sm-10">
            @stats.CommentsProcessed
        </div>
    </div>
        <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Comments Flagged:</strong></label>
        <div class="col-sm-10">
            @stats.CommentsFlagged
        </div>
    </div>
        <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Posts Seen:</strong></label>
        <div class="col-sm-10">
            @stats.PostsProcessed
        </div>
    </div>
        <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Lemmy Flagged:</strong></label>
        <div class="col-sm-10">
            @stats.PostsFlagged
        </div>
    </div>
        <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Start Time:</strong></label>
        <div id="startTime" class="col-sm-10">
        </div>
        <script>
            document.getElementById('startTime').innerText = new Date('@stats.StartTime'+ ' UTC');
        </script>
    </div>
    <div class="form-group row">
        <label for="promt" class="col-sm-2 col-form-label"><strong>Last Seen:</strong></label>
        <div id="lastSeen" class="col-sm-10">
        </div>
        <script>
            document.getElementById('lastSeen').innerText = new Date('@stats.LastSeen' + ' UTC');
        </script>
    </div>
    </div>

}
else
{
    <div class="container">
        <div class="row">
            <strong>The stats aren't here matey... Maybe LemmyNanny is offline or something happened to the stats.</strong>
        </div>



</div>
}
